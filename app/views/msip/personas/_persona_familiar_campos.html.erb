<%= turbo_frame_tag "familiar_#{f.index}" do %>
  <% if f.object.personados.nil? %>
    <% f.object.personados = Msip::Persona.new %>
  <% end %>
  <%= f.simple_fields_for :personados do |p| %>
    <div class="row">
      <div class="col">
        <datalist id="fuente-familiares">
        </datalist>
        <%= p.input :id, as: :hidden %>
        <% ph = 'N'
        ac = {'data-autocompleta' => 'no',
              style: 'width: 9em' }
        if (!p.object.nombres || p.object.nombres == 'N' || 
            p.object.nombres == '')
          ph = 'Buscar'
          ac = { list: "fuente-familiares",
                 style: 'width: 9em' }
        end %>

        <%= p.input :nombres, placeholder: ph, 
          value_method: lambda {|t| '' if t.nombres == 'N'},
          input_html: ac,
          label: false %>
      </div>
      <div class="col">
        <%= p.input :apellidos, label: false %>
      </div>
      <div class="col">
        <%= p.input :sexo, 
          collection: Msip::Persona::sexo_opciones,
          include_blank: false,
          label: false %>
      </div>
      <div class="col">
        <%= p.input :tdocumento_id,
          collection: Msip::ModeloHelper.opciones_tabla_basica(
            Msip::Tdocumento, p, :tdocumento_id
          ),
          label_method: :sigla,
          value_method: :id ,
          label: false,
          input_html: { style: 'width: 5em' }
        %>
      </div> 
      <div class="col">
        <%= p.input :numerodocumento, 
          label: false %>
      </div>
      <div class="col">
        <%= f.input :trelacion_id, 
          collection: Msip::ModeloHelper.opciones_tabla_basica(
            Msip::Trelacion, f, :trelacion_id
          ),
          label_method: :nombre,
          value_method: :id,
          label: false %>
      </div>
      <div class="col">
        <%= p.submit "Eliminar", 
          formaction: eliminar_familiar_path(
            id: f.object.id, index: f.index),
            formmethod: :delete, 
            formnovalidate: true, 
            class: 'btn btn-sm btn-danger',
            data: { 
              turbo_frame: "familiar_#{f.index}",
              disable_with: false
            } %>
      </div>
    </div>
  <% end %>
<% end %>
